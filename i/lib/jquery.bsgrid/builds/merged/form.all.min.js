/**
* jQuery.bsgrid v1.38 by @Baishui2004
* Copyright 2014 Apache v2 License
* https://github.com/baishui2004/jquery.bsgrid
*/

String.prototype.startWith=function(a){if(a==null||a==""||this.length==0||a.length>this.length){return false}else{return this.substr(0,a.length)==a}};String.prototype.endWith=function(a){if(a==null||a==""||this.length==0||a.length>this.length){return false}else{return this.substring(this.length-a.length)==a}};String.prototype.replaceAll=function(a,b){return this.replace(new RegExp(a,"gm"),b)};function StringBuilder(){if(arguments.length){this.append.apply(this,arguments)}}StringBuilder.prototype=function(){var c=Array.prototype.join,d=Array.prototype.slice,a=/\{(\d+)\}/g,b=function(){return c.call(this,"")};return{constructor:StringBuilder,length:0,append:Array.prototype.push,appendFormat:function(e){var g=0,f=d.call(arguments,1);this.append(a.test(e)?e.replace(a,function(h,j){return f[j]}):e.replace(/\?/g,function(){return f[g++]}));return this},size:function(){return this.toString().length},toString:b,valueOf:b}}();
$.bsgrid={param:function(c,b){if(b==undefined){b=false}if(!b){return $.param(c)}var d=new StringBuilder();if(c instanceof Array){$.each(c,function(f,e){d.append("&"+e.name+"=");d.append(encodeURIComponent(encodeURIComponent(e.value)))})}else{for(var a in c){d.append("&"+a+"=");d.append(encodeURIComponent(encodeURIComponent(c[a])))}}return d.length>0?d.toString().substring(1):""},getKeysString:function(c,a){if(a==undefined){a=","}var d=new StringBuilder();if(c instanceof Array){$.each(c,function(f,e){if((d.toString()+a).indexOf(a+e.name+a)==-1){d.append(a+e.name)}})}else{for(var b in c){d.append(a+b)}}return d.length>0?d.toString().substring(1):""},forcePushPropertyInObject:function(b,a,c){if(b.hasOwnProperty(a)){b[a+"_f"]=c}else{b[a]=c}},adaptAttrOrProp:function(b,d,c){var a=parseInt($.fn.jquery.substring(0,$.fn.jquery.indexOf(".",2)).replace(".",""));if(c==undefined){if(a>=16){return b.prop(d)}else{return b.attr(d)}}else{if(a>=16){b.prop(d,c)}else{b.attr(d,c)}}},alert:function(a){alert(a)}};
(function(a){a.fn.bsgrid_form={defaults:{},formObjs:{},init:function(e,d){var c={settings:a.extend(true,{},a.fn.bsgrid_form.defaults,d),formId:e,jqueryObj:a("#"+e),formType:""};var b={options:c,addAssistShowFormTags:function(){a.fn.bsgrid_form.addAssistShowFormTags(c)},showForm:function(f){a.fn.bsgrid_form.showForm(c,f)},showOrHideRequireSpan:function(f){a.fn.bsgrid_form.showOrHideRequireSpan(c,f)},showOrHideAssistForms:function(f){a.fn.bsgrid_form.showOrHideAssistForms(c,f)},showOrHideTag:function(f){a.fn.bsgrid_form.showOrHideTag(c,f)}};a.fn.bsgrid_form.formObjs[e]=b;b.addAssistShowFormTags();return b},getFormObj:function(c){var b=a.fn.bsgrid_form.formObjs[c];return b?b:null},addAssistShowFormTags:function(b){a(".formInput select",b.jqueryObj).each(function(){a(this).before('<input type="text" style="display: none;" />');var d=a(this).get(0).attributes;for(var e=0;e<d.length;e++){var c=d[e].name;if(c.toLowerCase().endWith("able")&&a(this).attr(c)=="false"){a(this).prev("input").attr(c,"false")}}});a(".formInput textarea",b.jqueryObj).each(function(){a(this).before('<div class="assist" style="display: none;"></div>')})},showForm:function(b,c){b.formType=c;this.showOrHideRequireSpan(b,c);this.showOrHideAssistForms(b,c);this.showOrHideTag(b,c);if(c.startWith("view")){a(".formInput :input:not(:button,:submit,:reset)",b.jqueryObj).css({"border-width":"0"}).attr("readOnly","readOnly")}else{if(c.startWith("add")){a(".formInput :input:not(:button,:submit,:reset)",b.jqueryObj).css({border:"solid 1px #abadb3"}).removeAttr("readOnly")}else{if(c.startWith("edit")){a(".formInput :input:not(:button,:submit,:reset)",b.jqueryObj).css({border:"solid 1px #abadb3"}).removeAttr("readOnly");a(".formInput :input["+c+"Able=false]",b.jqueryObj).css({"border-width":"0"}).attr("readOnly","readOnly")}}}},showOrHideRequireSpan:function(b,c){if(c.startWith("view")){a(".formLabel span.require",b.jqueryObj).hide()}else{if(c.startWith("edit")){a(".formLabel:has(span.require) ~ .formInput:has(:input["+c+"Able=false])",b.jqueryObj).prev().find("span.require").hide()}else{a(".formLabel span.require",b.jqueryObj).show()}}},showOrHideAssistForms:function(b,c){a(".formInput select",b.jqueryObj).each(function(){var e=(c.startWith("view")||(c.startWith("edit")&&a(this).attr(c+"Able")=="false"))?"block":"none";a(this).prev("input").css("display",e).val(a(this).find("option:selected").text());var d=e=="block"?"none":"block";a(this).css("display",d)});a(".formInput textarea",b.jqueryObj).each(function(){var e=(c.startWith("view")||(c.startWith("edit")&&a(this).attr(c+"Able")=="false"))?"block":"none";a(this).prev("div").css("display",e).html(a(this).val());var d=e=="block"?"none":"block";a(this).css("display",d)})},showOrHideTag:function(b,c){a("*",b.jqueryObj).each(function(){var d=a.trim(a(this).attr("showType"));if(d!=""){if((c.startWith("view")||c.startWith("add")||c.startWith("edit"))&&(","+d+",").indexOf(","+c+",")>-1){a(this).show()}else{a(this).hide()}}})}}})(jQuery);
